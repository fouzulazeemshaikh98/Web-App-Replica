<html>
  <head>
    <title>WS Test</title>
    <script src="/ws_test/socket.io/socket.io.js" type="text/javascript"></script>
    <script type="text/javascript">
      var base = window.location.protocol + '//' + window.location.host;
      var opts = {resource: 'ws_test/socket.io'};
      if (window.location.protocol == 'https:') {
        opts.secure = true;
      }
      var socket = io.connect(base, opts);
      socket.on('message', function (data) {
        document.getElementById('ping').innerHTML = 'Ping ' + data.index;
        setTimeout(function() {
          socket.emit('echo', {});
        }, 1000);
      });
    </script>
  </head>
  <body>
    <div id="ping">Ping -1</div>
  </body>
</html>